#!/bin/bash

# see if global variable is set
# global variable SeismicUnixGui_script locates main folder

 if [ -z "${SeismicUnixGui_script}" ]; then

 	echo "global variable SeismicUnixGui_script must first be set"
 	echo "e.g. in .bashrc: "
 	echo " export SeismicUnixGui_script=/Location/of/script/folder"

 else
	# run immodpg.pl -- a gui
	 echo "perl $SeismicUnixGui_script/../big_streams/immodpg.pl"
     	 perl $SeismicUnixGui_script/../big_streams/immodpg.pl &
    
    # Wait a second or two before starting 
    # immodpg1.1, a fortran program
    # fortran program needs a file generated by the gui
    # in immodpg.pl	
     	 sleep 2
    
# Check if mmodpg1.1 (fortran program) exists before running
  	  if [ -f ${SeismicUnixGui}/fortran/bin/immodpg1.1 ] ; then

	 # echo " immodpg,${SeismicUnixGui} "
	 # echo " immodpg, Found the file you need (immodpg1.1)"
	   ${SeismicUnixGui}/fortran/bin/immodpg1.1
	 # echo "immodpg, nada"

 	else
        echo "immodpg, immodpg1.1 not found in expected location"	 
    	echo "immodpg, Please install immodpg1.1 first- Read Installation Manual"	 
 	fi

fi

